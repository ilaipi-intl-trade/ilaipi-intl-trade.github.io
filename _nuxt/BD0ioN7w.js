import{_ as j}from"./BCSfb61W.js";import{y as R,q as B,v as P,g as l,c as f,o as g,x as I,z as M,s as D,j as b,A as Q,f as C,a,h as T,t as p,b as S,w as V,d as A,i as E,m as F,B as h}from"./DfYS6yRp.js";import{_ as $}from"./CYBYweAB.js";import{u as O}from"./DmIOFtDQ.js";const z=R({__name:"Input",props:{class:{},defaultValue:{},modelValue:{}},emits:["update:modelValue"],setup(e,{emit:r}){const n=e,t=O(n,"modelValue",r,{passive:!0,defaultValue:n.defaultValue});return(c,u)=>B((g(),f("input",{"onUpdate:modelValue":u[0]||(u[0]=m=>D(t)?t.value=m:null),"data-slot":"input",class:I(l(M)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input shadow-xs flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base outline-none transition-[color,box-shadow] file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",n.class))},null,2)),[[P,l(t)]])}}),H={class:"mb-6 flex items-center gap-4"},q={class:"h-16 w-16 overflow-hidden rounded-lg bg-gray-100 dark:bg-gray-800"},L={class:"font-medium text-gray-900 dark:text-white"},Y={class:"text-primary text-lg font-bold"},G={class:"mb-6"},J={class:"flex items-center gap-2"},K=["disabled"],W={class:"mb-6 rounded-lg bg-gray-50 p-4 dark:bg-gray-800"},X={class:"flex justify-between text-sm text-gray-600 dark:text-gray-300"},Z={class:"flex justify-between text-sm text-gray-600 dark:text-gray-300"},ee={class:"flex justify-between font-semibold text-gray-900 dark:text-white"},te={key:0,class:"text-primary"},ae={key:1,class:"text-gray-500"},se={class:"flex gap-3"},re={key:0},ie={key:1},fe={__name:"QuantityDialog",props:{isOpen:{type:Boolean,default:!1},bag:{type:Object,required:!0},defaultQuantity:{type:Number,default:100}},emits:["close","confirm"],setup(e,{emit:r}){const n=e,d=r,t=b(n.defaultQuantity),c=b(!1);Q(()=>n.isOpen,w=>{w&&(t.value=n.defaultQuantity)});const u=async()=>{if(!(t.value<0)){c.value=!0;try{d("confirm",n.bag,t.value),d("close")}finally{c.value=!1}}},m=()=>{d("close")},o=()=>{t.value+=50},y=()=>{t.value>=50?t.value-=50:t.value=0};return(w,s)=>{const _=j;return e.isOpen?(g(),f("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center",onClick:m},[s[12]||(s[12]=a("div",{class:"absolute inset-0 bg-black/20"},null,-1)),a("div",{class:"relative z-10 w-full max-w-md rounded-lg bg-white p-6 shadow-xl dark:bg-gray-900",onClick:s[2]||(s[2]=E(()=>{},["stop"]))},[s[11]||(s[11]=a("h3",{class:"mb-4 text-lg font-semibold text-gray-900 dark:text-white"}," Add to Cart ",-1)),a("div",H,[a("div",q,[e.bag.images[0]?(g(),T(_,{key:0,provider:"aliyun",src:e.bag.images[0].url,alt:e.bag.images[0].alt,class:"h-full w-full object-cover"},null,8,["src","alt"])):C("",!0)]),a("div",null,[a("h4",L,p(e.bag.id)+" Handbag ",1),a("p",Y,"¥"+p(e.bag.price),1)])]),a("div",G,[s[5]||(s[5]=a("label",{class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"}," Quantity ",-1)),a("div",J,[a("button",{onClick:y,class:"flex h-10 w-10 items-center justify-center rounded-lg border border-gray-300 transition-colors hover:bg-gray-100 dark:border-gray-600 dark:hover:bg-gray-700",disabled:l(t)<=0},[...s[3]||(s[3]=[a("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 12H4"})],-1)])],8,K),S(l(z),{modelValue:l(t),"onUpdate:modelValue":s[0]||(s[0]=k=>D(t)?t.value=k:null),modelModifiers:{number:!0},type:"number",min:"0",class:"w-20 text-center",onInput:s[1]||(s[1]=k=>t.value=Math.max(0,parseInt(l(t))||0))},null,8,["modelValue"]),a("button",{onClick:o,class:"flex h-10 w-10 items-center justify-center rounded-lg border border-gray-300 transition-colors hover:bg-gray-100 dark:border-gray-600 dark:hover:bg-gray-700"},[...s[4]||(s[4]=[a("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)])])])]),a("div",W,[a("div",X,[s[6]||(s[6]=a("span",null,"Unit Price:",-1)),a("span",null,"¥"+p(e.bag.price),1)]),a("div",Z,[s[7]||(s[7]=a("span",null,"Quantity:",-1)),a("span",null,p(l(t))+" pieces",1)]),s[9]||(s[9]=a("hr",{class:"my-2 border-gray-200 dark:border-gray-600"},null,-1)),a("div",ee,[s[8]||(s[8]=a("span",null,"Total:",-1)),l(t)>0?(g(),f("span",te," ¥"+p((e.bag.price*l(t)).toLocaleString()),1)):(g(),f("span",ae,"¥0"))])]),a("div",se,[S(l($),{variant:"outline",class:"flex-1",onClick:m,disabled:l(c)},{default:V(()=>[...s[10]||(s[10]=[A(" Cancel ",-1)])]),_:1},8,["disabled"]),S(l($),{class:"flex-1",onClick:u,disabled:l(c)||l(t)<=0},{default:V(()=>[l(c)?(g(),f("span",re,"Adding...")):(g(),f("span",ie,"Add to Cart"))]),_:1},8,["disabled"])])])])):C("",!0)}}};let x=null,v=null;const ne=3600*1e3;async function N(){if(x&&v&&Date.now()-v<ne)return x;try{const e=await fetch("https://api.exchangerate-api.com/v4/latest/CNY");if(!e.ok)throw new Error("Failed to fetch exchange rate");const n=(await e.json()).rates.USD,d=n<1?1/n:n;return x=d,v=Date.now(),d}catch(e){console.warn("Failed to fetch real-time exchange rate, using fallback rate:",e);const r=7.2;return x=r,v=Date.now(),r}}async function U(e){const r=await N();return Number((e/r).toFixed(2))}async function oe(e){return`$${await U(e)}`}function pe(){const e=b(null),r=b(!1),n=b(null),d=async()=>{if(!r.value){r.value=!0,n.value=null;try{const o=await N();e.value=o}catch(o){n.value=o instanceof Error?o.message:"Failed to fetch exchange rate",console.error("Exchange rate fetch error:",o)}finally{r.value=!1}}},t=async o=>await U(o),c=async o=>await oe(o),u=o=>e.value?Number((o/e.value).toFixed(2)):null,m=o=>{const y=u(o);return y?`$${y}`:null};return F(()=>{d()}),{exchangeRate:h(e),isLoading:h(r),error:h(n),fetchExchangeRate:d,convertToUSD:t,getUSDPrice:c,calculateUSDPrice:u,getFormattedUSDPriceSync:m}}const le=(e,r)=>{const n=encodeURIComponent(e),d=`${e}${r}.JPG`,t=encodeURIComponent(d);return`/${n}/${t}`},i=(e,r)=>Array.from({length:r},(n,d)=>{const t=String(d+1).padStart(3,"0");return{id:`${e}-${t}`,url:le(e,t),alt:`${e} 手提包图片 ${t}`}}),de=[{id:"S01#",price:14,images:i("S01#",38)},{id:"S02#",price:9,images:i("S02#",7)},{id:"S03#",price:10.5,images:i("S03#",6)},{id:"S04#",price:14,images:i("S04#",15)},{id:"S05#",price:249,images:i("S05#",6)},{id:"S06#",price:329,images:i("S06#",8)},{id:"S07#",price:279,images:i("S07#",6)},{id:"S08#",price:159,images:i("S08#",13)},{id:"S09#",price:799,images:i("S09#",7)},{id:"S10#",price:189,images:i("S10#",19)},{id:"S11#",price:349,images:i("S11#",12)},{id:"S12#",price:459,images:i("S12#",8)},{id:"S13#",price:299,images:i("S13#",7)},{id:"S14#",price:399,images:i("S14#",9)},{id:"S15#",price:229,images:i("S15#",10)},{id:"S16#",price:269,images:i("S16#",10)},{id:"S17#",price:319,images:i("S17#",6)},{id:"S18#",price:699,images:i("S18#",1)},{id:"S19#",price:279,images:i("S19#",1)},{id:"S20#",price:199,images:i("S20#",1)},{id:"S21#",price:249,images:i("S21#",5)}],be=e=>de.find(r=>r.id===`${e}#`);export{fe as _,de as b,be as g,pe as u};
